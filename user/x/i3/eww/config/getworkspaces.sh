xprop -root -spy _NET_CLIENT_LIST_STACKING | awk -F '# ' '{ split($2,ws,", "); output = ""; for (w in ws) { cmd = "xprop -id " ws[w] " _NET_WM_DESKTOP"; cmd | getline out; split(out,d," = "); out = d[2]; close(cmd); output = output "\n" out }  split(output,is,"\n"); n = asort(is); delete is[n]; close(n); final = "["; cmd = "xprop -root _NET_DESKTOP_NAMES"; cmd | getline n; close(cmd); split(n,nn," = "); split(nn[2], names, ", "); for (i in is) final = final names[is[i]+1] ","; print substr(final, 1, length(final)-1) "]" }'
